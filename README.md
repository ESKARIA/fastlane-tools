
# Fastlane Tools: Документация по лейнам

## Описание проекта

Этот репозиторий содержит набор инструментов для автоматизации процессов разработки и публикации приложений с помощью Fastlane. Лейны предназначены для сборки, тестирования, публикации и других задач, связанных с CI/CD для iOS приложений.

## Основные лейны

### `build`

Собирает приложение для определенной конфигурации (например, Debug или Release).

**Команда:**

```bash
fastlane build
```

**Описание:**

- Собирает проект с помощью указанной конфигурации Xcode.
- Определяет основную цель (target) и идентификатор приложения.
- Путь к проекту и другие параметры загружаются из переменных окружения.

**Переменные окружения:**

- `MAIN_TARGET` — основная цель приложения.
- `APP_IDENTIFIER` — идентификатор приложения.
- `DERIVED_PATH` — путь к сборочной директории.

### `test`

Запускает тесты для проекта.

**Команда:**

```bash
fastlane test
```

**Описание:**

- Выполняет тесты в Xcode для указанной цели.
- Генерирует отчет о тестировании.
- Полезно для интеграции с CI/CD системами.

### `upload`

Публикует собранную версию приложения в App Store Connect.

**Команда:**

```bash
fastlane upload
```

**Описание:**

- Используется для отправки приложения в App Store Connect.
- Лейн включает шаги для подписания приложения и загрузки его метаданных.
- Включает автоматическое увеличение версии и номера сборки.

**Переменные окружения:**

- `APPSTORE_KEY_ID` — идентификатор ключа для App Store.
- `APPSTORE_ISSUER_ID` — идентификатор издателя.
- `APPSTORE_KEY_CONTENT` — содержимое ключа для подписания.

### `upload_dsyms`

Загружает символы (dSYM) для анализа в Crashlytics.

**Команда:**

```bash
fastlane upload_dsyms
```

**Описание:**

- Используется для отправки файлов dSYM в Crashlytics для анализа крашей.
- Путь к скрипту загрузки загружается автоматически из настроек проекта.

**Переменные окружения:**

- `CRASHLYTICS_PATH` — путь к скрипту загрузки символов.

### `version_bump`

Увеличивает номер версии приложения.

**Команда:**

```bash
fastlane version_bump
```

**Описание:**

- Автоматически увеличивает номер версии в проекте Xcode.
- Полезно для поддержания корректного отслеживания версий при каждом релизе.

## Использование

Для запуска любого лейна используйте команду `fastlane` с именем лейна. Например:

```bash
fastlane <имя_лейна>
```

Например, для запуска сборки:

```bash
fastlane build
```

## Переменные окружения

Следующие переменные окружения должны быть определены в вашем `.env` файле для корректной работы лейнов:

- `APP_IDENTIFIER` — идентификатор приложения в формате `com.company.app`.
- `MAIN_TARGET` — основная цель (target) для сборки.
- `APPSTORE_KEY_ID` — ключ для публикации в App Store.
- `APPSTORE_ISSUER_ID` — идентификатор издателя.
- `APP_VERSION` — текущая версия приложения.
- `BUILD_NUMBER` — номер текущей сборки.

## Дополнительная информация

Более подробная информация о Fastlane доступна в официальной документации: [Fastlane Documentation](https://docs.fastlane.tools)

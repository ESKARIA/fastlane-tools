# üéâ –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- –§—É–Ω–∫—Ü–∏—è `retry_with_backoff` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–≤—Ç–æ—Ä–∞–º–∏
- –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –≤ TestFlight (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- –û–ø–µ—Ä–∞—Ü–∏–∏ —Å App Store Connect

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–≤—ã—à–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ CI/CD
- ‚úÖ –ú–µ–Ω—å—à–µ —Ä—É—á–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö

**–ü—Ä–∏–º–µ—Ä:**
```ruby
retry_with_backoff(max_retries: 3, delay: 5.0) do
  testflight(...)
end
```

---

### 2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–±–æ—Ä–∫–∞—Ö
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≥—Ä—É–∑–∫–∞—Ö –≤ TestFlight
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ú–µ—Ç—Ä–∏–∫–∏ –≤ Telegram

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
export TELEGRAM_ENABLED="true"
export TELEGRAM_BOT_TOKEN="your_token"
export TELEGRAM_CHAT_ID="your_chat_id"
```

**–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤ TestFlight (Internal/External)
- ‚ùå –û—à–∏–±–∫–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. `TELEGRAM_NOTIFICATIONS.md`

---

### 3. –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Ç–∞–π–º–∏–Ω–≥–∏

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –¥–ª—è –≤—Å–µ—Ö lanes
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ (`fastlane/metrics.json`)
- –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ Telegram
- –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 –∑–∞–ø–∏—Å–µ–π)

**–°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è lane
- –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- Build number
- –†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤ (IPA, dSYM)
- –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (success/failed)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```ruby
# –ú–µ—Ç—Ä–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö lanes
# –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏:
add_metric("custom_metric", "value")
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. `METRICS_AND_RETRY.md`

---

## üìù –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

```bash
# Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
export TELEGRAM_ENABLED="true"
export TELEGRAM_BOT_TOKEN="your_token"
export TELEGRAM_CHAT_ID="your_chat_id"

# –ú–µ—Ç—Ä–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è
# Retry –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ CI/CD

```yaml
variables:
  TELEGRAM_ENABLED: "true"
  TELEGRAM_BOT_TOKEN: "${TELEGRAM_BOT_TOKEN}"  # –ò–∑ CI/CD secrets
  TELEGRAM_CHAT_ID: "${TELEGRAM_CHAT_ID}"       # –ò–∑ CI/CD secrets

build:
  script:
    - bundle exec fastlane build
    # –ú–µ—Ç—Ä–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
    # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
    # Retry –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –º–µ—Ç—Ä–∏–∫

### –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è build:

```json
{
  "lane": "build",
  "timestamp": "2024-01-15T10:30:00+03:00",
  "metrics": {
    "version": "1.2.3",
    "build_number": "456",
    "ipa_size_mb": 125.5,
    "ipa_size_gb": 0.123,
    "dsym_size_mb": 15.2,
    "duration_seconds": 1250.5,
    "duration_formatted": "20 –º–∏–Ω 50 —Å–µ–∫",
    "status": "success"
  }
}
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

```bash
# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
export TELEGRAM_ENABLED="false"

# –ú–µ—Ç—Ä–∏–∫–∏ –≤—Å–µ–≥–¥–∞ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è (–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –≤ –∫–æ–¥–µ)
# Retry –ª–æ–≥–∏–∫–∞ –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –≤ –∫–æ–¥–µ)
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** `TELEGRAM_NOTIFICATIONS.md`
- **–ú–µ—Ç—Ä–∏–∫–∏ –∏ Retry:** `METRICS_AND_RETRY.md`
- **–ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π:** `IMPROVEMENTS_ROADMAP.md`

---

**–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

